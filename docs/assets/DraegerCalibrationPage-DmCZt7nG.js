import{j as e,$ as z,y as w,X as C,D as H,Z as I}from"./ui-Donqwxo7.js";import{r as l}from"./vendor-CW-_dNtU.js";import{b as M,u as P,c as p}from"./query-Cw8NcARV.js";import{d as c,h as g}from"./index-UeR74Ic6.js";import{B as d}from"./button-Ct9-8cEN.js";import{I as T}from"./input-BnIZQlUA.js";import"./utils-BTGVH9Kg.js";const D=l.forwardRef(({className:s,...t},i)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:i,className:c("w-full caption-bottom text-sm",s),...t})}));D.displayName="Table";const R=l.forwardRef(({className:s,...t},i)=>e.jsx("thead",{ref:i,className:c("[&_tr]:border-b",s),...t}));R.displayName="TableHeader";const B=l.forwardRef(({className:s,...t},i)=>e.jsx("tbody",{ref:i,className:c("[&_tr:last-child]:border-0",s),...t}));B.displayName="TableBody";const Q=l.forwardRef(({className:s,...t},i)=>e.jsx("tfoot",{ref:i,className:c("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Q.displayName="TableFooter";const m=l.forwardRef(({className:s,...t},i)=>e.jsx("tr",{ref:i,className:c("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));m.displayName="TableRow";const o=l.forwardRef(({className:s,...t},i)=>e.jsx("th",{ref:i,className:c("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));o.displayName="TableHead";const r=l.forwardRef(({className:s,...t},i)=>e.jsx("td",{ref:i,className:c("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));r.displayName="TableCell";const A=l.forwardRef(({className:s,...t},i)=>e.jsx("caption",{ref:i,className:c("mt-4 text-sm text-muted-foreground",s),...t}));A.displayName="TableCaption";const x={nc12:"",serialNumber:"",calibrationDate:"",calibratedBy:""};function K(){const s=M(),{data:t=[],isLoading:i}=P({queryKey:["/api/draeger-calibrations"]}),[k,u]=l.useState(null),[f,y]=l.useState(x),[h,b]=l.useState(!1),[v,j]=l.useState(x),S=p({mutationFn:a=>g("POST","/api/draeger-calibrations",a),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/draeger-calibrations"]}),b(!1),j(x)}}),E=p({mutationFn:({id:a,data:n})=>g("PATCH",`/api/draeger-calibrations/${a}`,n),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/draeger-calibrations"]}),u(null)}}),F=p({mutationFn:a=>g("DELETE",`/api/draeger-calibrations/${a}`),onSuccess:()=>s.invalidateQueries({queryKey:["/api/draeger-calibrations"]})});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Draeger Calibration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage calibration records"})]}),e.jsxs(d,{onClick:()=>b(!0),disabled:h,children:[e.jsx(z,{className:"h-4 w-4 mr-1"})," Add Entry"]})]}),e.jsxs(D,{children:[e.jsx(R,{children:e.jsxs(m,{children:[e.jsx(o,{children:"12NC"}),e.jsx(o,{children:"Serial Number"}),e.jsx(o,{children:"Calibration Date"}),e.jsx(o,{children:"Calibrated By"}),e.jsx(o,{className:"w-20"})]})}),e.jsxs(B,{children:[h&&e.jsxs(m,{children:[["nc12","serialNumber","calibrationDate","calibratedBy"].map(a=>e.jsx(r,{children:e.jsx(T,{value:v[a],type:a==="calibrationDate"?"date":"text",onChange:n=>j(N=>({...N,[a]:n.target.value})),className:"h-8 text-sm"})},a)),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(d,{size:"icon",className:"h-7 w-7",onClick:()=>S.mutate(v),children:e.jsx(w,{className:"h-3.5 w-3.5"})}),e.jsx(d,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>{b(!1),j(x)},children:e.jsx(C,{className:"h-3.5 w-3.5"})})]})})]}),i?null:t.map(a=>e.jsx(m,{children:k===a.id?e.jsxs(e.Fragment,{children:[["nc12","serialNumber","calibrationDate","calibratedBy"].map(n=>e.jsx(r,{children:e.jsx(T,{value:f[n],type:n==="calibrationDate"?"date":"text",onChange:N=>y(q=>({...q,[n]:N.target.value})),className:"h-8 text-sm"})},n)),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(d,{size:"icon",className:"h-7 w-7",onClick:()=>E.mutate({id:a.id,data:f}),children:e.jsx(w,{className:"h-3.5 w-3.5"})}),e.jsx(d,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>u(null),children:e.jsx(C,{className:"h-3.5 w-3.5"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"text-sm",children:a.nc12}),e.jsx(r,{className:"text-sm",children:a.serialNumber}),e.jsx(r,{className:"text-sm",children:a.calibrationDate}),e.jsx(r,{className:"text-sm",children:a.calibratedBy}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(d,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>{u(a.id),y({nc12:a.nc12,serialNumber:a.serialNumber,calibrationDate:a.calibrationDate,calibratedBy:a.calibratedBy})},children:e.jsx(H,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx(d,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>F.mutate(a.id),children:e.jsx(I,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})})]})},a.id)),!i&&t.length===0&&!h&&e.jsx(m,{children:e.jsx(r,{colSpan:5,className:"text-center text-sm text-muted-foreground py-12",children:"No calibration records yet."})})]})]})]})}function J(){return e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(K,{})})}export{J as default};
