import{r as l}from"./vendor-CW-_dNtU.js";import{j as r,ac as z,ad as B,ae as K,a as V,af as y,ag as A,u as N,P as O,f as g,d as E,ah as q,ai as G,aj as W,ak as Q,al as Z,am as J,an as X,g as Y,ao as ee,b as oe,ap as te,aq as re,ar as ne}from"./ui-Donqwxo7.js";import{T as se,e as ae,f as ie,d as b,g as ce}from"./index-CmI2uZiO.js";import{B as le}from"./button-gHr9dfwR.js";import{e as ue}from"./switch-BrUN3v4I.js";import{u as de}from"./query-Cw8NcARV.js";const C=768;function Ie(){const[e,o]=l.useState(void 0);return l.useEffect(()=>{const t=window.matchMedia(`(max-width: ${C-1}px)`),n=()=>{o(window.innerWidth<C)};return t.addEventListener("change",n),o(window.innerWidth<C),()=>t.removeEventListener("change",n)},[]),!!e}const R=["bg-blue-500/15 text-blue-700","bg-emerald-500/15 text-emerald-700","bg-violet-500/15 text-violet-700","bg-amber-500/15 text-amber-700","bg-rose-500/15 text-rose-700","bg-cyan-500/15 text-cyan-700","bg-orange-500/15 text-orange-700","bg-indigo-500/15 text-indigo-700"];function pe(e){let o=0;for(let t=0;t<e.length;t++)o=e.charCodeAt(t)+((o<<5)-o);return R[Math.abs(o)%R.length]}function fe(e){if(!e)return"?";const o=e.trim().split(/\s+/);return o.length>=2?(o[0][0]+o[o.length-1][0]).toUpperCase():o[0].substring(0,2).toUpperCase()}function De({name:e,className:o}){return e?r.jsx(se,{delayDuration:200,children:r.jsxs(ae,{children:[r.jsx(ie,{asChild:!0,children:r.jsx("span",{className:b("inline-flex items-center justify-center h-7 w-7 rounded-full text-[11px] font-bold shrink-0 cursor-default",pe(e),o),children:fe(e)})}),r.jsx(ce,{side:"top",className:"text-xs",children:e})]})}):r.jsx("span",{className:"text-muted-foreground",children:"â€”"})}function Fe({label:e,field:o,current:t,onSort:n,className:s}){const a=t.field===o;return r.jsx("th",{className:b("text-left py-3 px-5 text-xs font-semibold uppercase tracking-wide text-muted-foreground cursor-pointer select-none hover:text-foreground transition-colors group",s),onClick:()=>n(o),children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[e,a&&t.dir==="asc"&&r.jsx(z,{className:"h-3 w-3 text-primary"}),a&&t.dir==="desc"&&r.jsx(B,{className:"h-3 w-3 text-primary"}),!a&&r.jsx(K,{className:"h-3 w-3 opacity-0 group-hover:opacity-40 transition-opacity"})]})})}function Le(e,o,t){return e!==t?{field:t,dir:"asc"}:o==="asc"?{field:t,dir:"desc"}:{field:"",dir:null}}function $e(e,o,t){return!t||!o?e:[...e].sort((n,s)=>{let a=n[o],i=s[o];if(a==null&&(a=""),i==null&&(i=""),typeof a=="number"&&typeof i=="number")return t==="asc"?a-i:i-a;const c=String(a).toLowerCase(),u=String(i).toLowerCase();return t==="asc"?c.localeCompare(u):u.localeCompare(c)})}var w="Popover",[_,He]=V(w,[y]),h=y(),[ve,p]=_(w),S=e=>{const{__scopePopover:o,children:t,open:n,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,c=h(o),u=l.useRef(null),[d,x]=l.useState(!1),[m=!1,f]=oe({prop:n,defaultProp:s,onChange:a});return r.jsx(te,{...c,children:r.jsx(ve,{scope:o,contentId:re(),triggerRef:u,open:m,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(P=>!P),[f]),hasCustomAnchor:d,onCustomAnchorAdd:l.useCallback(()=>x(!0),[]),onCustomAnchorRemove:l.useCallback(()=>x(!1),[]),modal:i,children:t})})};S.displayName=w;var k="PopoverAnchor",ge=l.forwardRef((e,o)=>{const{__scopePopover:t,...n}=e,s=p(k,t),a=h(t),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=s;return l.useEffect(()=>(i(),()=>c()),[i,c]),r.jsx(A,{...a,...n,ref:o})});ge.displayName=k;var T="PopoverTrigger",M=l.forwardRef((e,o)=>{const{__scopePopover:t,...n}=e,s=p(T,t),a=h(t),i=N(o,s.triggerRef),c=r.jsx(O.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$(s.open),...n,ref:i,onClick:g(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:r.jsx(A,{asChild:!0,...a,children:c})});M.displayName=T;var j="PopoverPortal",[he,xe]=_(j,{forceMount:void 0}),I=e=>{const{__scopePopover:o,forceMount:t,children:n,container:s}=e,a=p(j,o);return r.jsx(he,{scope:o,forceMount:t,children:r.jsx(E,{present:t||a.open,children:r.jsx(Y,{asChild:!0,container:s,children:n})})})};I.displayName=j;var v="PopoverContent",D=l.forwardRef((e,o)=>{const t=xe(v,e.__scopePopover),{forceMount:n=t.forceMount,...s}=e,a=p(v,e.__scopePopover);return r.jsx(E,{present:n||a.open,children:a.modal?r.jsx(Pe,{...s,ref:o}):r.jsx(Ce,{...s,ref:o})})});D.displayName=v;var me=ee("PopoverContent.RemoveScroll"),Pe=l.forwardRef((e,o)=>{const t=p(v,e.__scopePopover),n=l.useRef(null),s=N(o,n),a=l.useRef(!1);return l.useEffect(()=>{const i=n.current;if(i)return q(i)},[]),r.jsx(G,{as:me,allowPinchZoom:!0,children:r.jsx(F,{...e,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:g(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),a.current||(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:g(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:g(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ce=l.forwardRef((e,o)=>{const t=p(v,e.__scopePopover),n=l.useRef(!1),s=l.useRef(!1);return r.jsx(F,{...e,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(n.current||(c=t.triggerRef.current)==null||c.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((d=t.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),F=l.forwardRef((e,o)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:x,...m}=e,f=p(v,t),P=h(t);return W(),r.jsx(Q,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:r.jsx(Z,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:x,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(J,{"data-state":$(f.open),role:"dialog",id:f.contentId,...P,...m,ref:o,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),L="PopoverClose",be=l.forwardRef((e,o)=>{const{__scopePopover:t,...n}=e,s=p(L,t);return r.jsx(O.button,{type:"button",...n,ref:o,onClick:g(e.onClick,()=>s.onOpenChange(!1))})});be.displayName=L;var we="PopoverArrow",je=l.forwardRef((e,o)=>{const{__scopePopover:t,...n}=e,s=h(t);return r.jsx(X,{...s,...n,ref:o})});je.displayName=we;function $(e){return e?"open":"closed"}var Re=S,ye=M,Ae=I,H=D;const Ne=Re,Oe=ye,U=l.forwardRef(({className:e,align:o="center",sideOffset:t=4,...n},s)=>r.jsx(Ae,{children:r.jsx(H,{ref:s,align:o,sideOffset:t,className:b("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...n})}));U.displayName=H.displayName;function Ue({columns:e,visible:o,onChange:t}){return r.jsxs(Ne,{children:[r.jsx(Oe,{asChild:!0,children:r.jsxs(le,{variant:"outline",size:"sm",className:"h-8 gap-1.5 text-xs",children:[r.jsx(ne,{className:"h-3.5 w-3.5"})," Columns"]})}),r.jsxs(U,{align:"end",className:"w-52 p-2",children:[r.jsx("p",{className:"text-[10px] font-semibold uppercase tracking-wider text-muted-foreground px-2 py-1",children:"Show / Hide Columns"}),e.map(n=>r.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 rounded hover:bg-muted/50",children:[r.jsx("span",{className:"text-xs",children:n.label}),r.jsx(ue,{checked:o[n.key]!==!1,onCheckedChange:s=>t({...o,[n.key]:s}),className:"scale-75"})]},n.key))]})]})}function ze(e){const[o,t]=l.useState(()=>{const n={};return e.forEach(s=>{n[s.key]=s.defaultVisible!==!1}),n});return[o,t]}function Be(){const{data:e}=de({queryKey:["/api/user-preferences","default"]});return(e==null?void 0:e.role)==="admin"}export{Ue as C,De as N,Fe as S,Be as a,ze as b,Le as n,$e as s,Ie as u};
